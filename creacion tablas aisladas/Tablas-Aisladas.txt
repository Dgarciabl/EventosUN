USE trabajobd;
CREATE TABLE empresa(
      nit         INT(10) PRIMARY KEY ,
      nombre      VARCHAR(100) NOT NULL,
      direccion   VARCHAR(100) NOT NULL,
      telefono    VARCHAR(100) NOT NULL,
      tipo        VARCHAR(100) NOT NULL 
)ENGINE=INNODB;
ALTER TABLE empresa ADD CONSTRAINT CK_ex CHECK(tipo="externa");
ALTER TABLE empresa ADD CONSTRAINT CK_con CHECK(tipo="contratada");

CREATE TABLE externa(
      nit         INT(10)   REFERENCES empresa(nit),
      representante  VARCHAR(100) NOT NULL
)ENGINE=INNODB;


CREATE TABLE contratada(
      nit            INT(10) REFERENCES empresa(nit),
      especialidad      VARCHAR(100) NOT NULL
)ENGINE=INNODB;
ALTER TABLE contratada ADD CONSTRAINT CK_deco CHECK(especialidad="decoracion");
ALTER TABLE contratada ADD CONSTRAINT CK_entre CHECK(especialidad="entretenimiento");
ALTER TABLE contratada ADD CONSTRAINT CK_cat CHECK(especialidad="catering");


 
CREATE TABLE evento(
      nit_externa         INT(10) REFERENCES externa(nit),
      nit_contratada      INT(10) REFERENCES contratada(nit),
      cod_evento          INT(10) PRIMARY KEY AUTO_INCREMENT,
      tipo                VARCHAR(100) NOT NULL,
      fecha               DATE NOT NULL,
      presupuesto         VARCHAR(100) NOT NULL,
      nombre              VARCHAR(100),
      ubicacion           VARCHAR(100)
)ENGINE=INNODB;
ALTER TABLE evento ADD CONSTRAINT Fk_CK CHECK((nit_externa IS NULL AND nit_contratada IS NOT NULL) OR (nit_contratada IS NULL AND nit_externa IS NOT NULL));
ALTER TABLE evento ADD CONSTRAINT CK_cumple CHECK(tipo="cumplea√±os");
ALTER TABLE evento ADD CONSTRAINT CK_aniversario CHECK(tipo="aniversario");
ALTER TABLE evento ADD CONSTRAINT CK_quinces CHECK(tipo="quinces");
ALTER TABLE evento ADD CONSTRAINT CK_union CHECK(tipo="union")